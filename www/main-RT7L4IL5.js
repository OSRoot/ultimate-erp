import{$ as he,A as re,B as W,C as ne,D as S,E as v,F as ie,I as D,K as T,L as oe,N as se,O as ae,P as ce,Q as le,R as pe,S as de,U as R,V as ue,W as fe,X as V,Y as x,Z as ge,_ as me,a as C,aa as be,b as O,ba as ve,c as k,d as f,da as z,e as p,ea as we,f as B,fa as ye,g as m,ga as Ee,h as M,ha as Me,i as g,ia as Se,j as K,ja as Te,k as l,l as h,m as _,n as d,o as a,p as Z,q,r as J,s as Y,t as A,u as H,v as Q,w as X,x as ee,y as b,z as te}from"./chunk-4PEOCEKG.js";var Ae=[{path:"",pathMatch:"full",redirectTo:"intro"},{path:"intro",loadChildren:()=>import("./chunk-2EQ2KTUV.js").then(e=>e.IntroModule)}],N=class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=b({type:e});static \u0275inj=h({imports:[z.forRoot(Ae),z]})};var j=class e{constructor(t){this.platformId=t;this.isBrowser=R(this.platformId),this.isBrowser&&window.electronAPI&&(this.electronAPI=window.electronAPI)}electronAPI;isBrowser=!1;minimize(){if(console.log("Service: minimize()"),this.electronAPI)return console.log("Service: found electronAPI"),this.electronAPI.minimize();console.warn("Service: electronAPI missing")}toggleMaximize(){if(this.electronAPI)return console.log("Angular \u2192 toggleMaximize()"),this.electronAPI.toggleMaximize()}close(){this.electronAPI?(console.log("Angular \u2192 close()"),this.electronAPI.close()):console.warn("Electron API not available. Are you running in browser?")}static \u0275fac=function(r){return new(r||e)(d(A))};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})};var F=class e{constructor(t,r){this.translate=t;this.rendererFactory=r;this.renderer=this.rendererFactory.createRenderer(null,null)}renderer;initTranslate(){let t=localStorage.getItem("lang")||"ja";console.log("Saved language:",t),this.translate.setDefaultLang(t),this.changeLang(t)}changeLang(t){["en","ar","ja"].includes(t)||(console.warn(`Unsupported language: ${t}, defaulting to English`),t="en"),this.translate.use(t).subscribe({next:()=>console.log(`Language changed to ${t}`),error:i=>console.error(`Error changing language to ${t}`,i)}),localStorage.setItem("lang",t);let r=t==="ar"?"rtl":"ltr";document.querySelector("ion-content")?.classList.add("hidden"),document.documentElement.setAttribute("dir",r),document.querySelector("html")?.setAttribute("dir",r);let n=document.documentElement;t==="ar"?(n.style.setProperty("--ion-font-family","var(--ion-font-family-arabic)"),n.style.setProperty("--ion-font-family-bold","var(--ion-font-family-bold-arabic)")):t==="ja"?(n.style.setProperty("--ion-font-family",'"Noto Sans JP", sans-serif'),n.style.setProperty("--ion-font-family-bold",'"Noto Sans JP Bold", sans-serif')):(n.style.setProperty("--ion-font-family",'"regular", sans-serif'),n.style.setProperty("--ion-font-family-bold",'"bold", sans-serif'))}getLang(){return localStorage.getItem("lang")||"en"}translateByKey(t){return t?this.translate.instant(t):""}static \u0275fac=function(r){return new(r||e)(d(Ee),d(Q))};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})};var Re=e=>({hide:e}),L=class e{constructor(t){this.platformId=t;R(t)&&this.locale.initTranslate()}title=Y("ultimate-erp");electronService=a(j);showHeader=a(we).showHeader;locale=a(F);clickTest(){console.log("Angular button click fired"),this.electronService.minimize()}static \u0275fac=function(r){return new(r||e)(X(A))};static \u0275cmp=ee({type:e,selectors:[["app-root"]],standalone:!1,decls:13,vars:6,consts:[[1,"main-app-window"],[1,"titlebar",3,"ngClass"],[1,"app-title"],[1,"window-controls"],["id","min-btn",3,"click"],["id","max-btn",3,"click"],["id","close-btn",3,"click"]],template:function(r,n){r&1&&(S(0,"div",0)(1,"header",1)(2,"div",2),T(3),ae(4,"translate"),v(),S(5,"div",3)(6,"button",4),D("click",function(){return n.clickTest()}),T(7,"\u2013"),v(),S(8,"button",5),D("click",function(){return n.electronService.toggleMaximize()}),T(9,"\u{1F533}"),v(),S(10,"button",6),D("click",function(){return n.electronService.close()}),T(11,"\u2715"),v()()(),ie(12,"router-outlet"),v()),r&2&&(H(),ne("ngClass",se(4,Re,!n.showHeader())),H(2),oe(ce(4,2,"system.TITLE")))},dependencies:[de,ve,Me],styles:['@charset "UTF-8";.main-app-window[_ngcontent-%COMP%]{position:relative;height:100%}.titlebar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:36px;padding:4px 12px;display:flex;justify-content:space-between;align-items:center;-webkit-app-region:drag!important;background:radial-gradient(circle at center,#001020,#000);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border-bottom:1px solid rgba(0,255,255,.4);color:#e0ffff;letter-spacing:1px;transition:opacity .3s ease,transform .3s ease;z-index:10}.titlebar.hide[_ngcontent-%COMP%]{opacity:0;transform:translateY(-100%);pointer-events:none}.window-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-app-region:no-drag!important;background:transparent;border:none;color:#e0ffff;cursor:pointer;padding:0 8px;font-size:14px;transition:all .2s ease}.window-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#0ff;text-shadow:0 0 2px rgba(0,255,255,.286),0 0 4px rgba(0,255,255,.2)}.main-app-window.has-header[_ngcontent-%COMP%]   router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:36px}.app-title[_ngcontent-%COMP%]{font-weight:600;text-shadow:0 0 4px rgba(0,255,255,.435),0 0 2px rgba(0,255,255,.2);animation:_ngcontent-%COMP%_titlePulse 3s infinite alternate}@keyframes _ngcontent-%COMP%_titlePulse{0%{text-shadow:0 0 4px cyan,0 0 8px rgba(0,255,255,.6)}to{text-shadow:0 0 8px cyan,0 0 16px rgb(0,255,255)}}.titlebar[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:linear-gradient(90deg,transparent,rgba(0,255,255,.455),transparent)}']})};var $="Service workers are disabled or not supported by this browser",y=class{serviceWorker;worker;registration;events;constructor(t,r){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new O(n=>n.error(new g(5601,!1)));else{let n=null,i=new k;this.worker=new O(c=>(n!==null&&c.next(n),i.subscribe(I=>c.next(I))));let s=()=>{let{controller:c}=t;c!==null&&(n=c,i.next(n))};t.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(M(()=>t.getRegistration().then(c=>{if(!c)throw new g(5601,!1);return c})));let o=new k;this.events=o.asObservable();let u=c=>{let{data:I}=c;I?.type&&o.next(I)};t.addEventListener("message",u),r?.get(W,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",s),t.removeEventListener("message",u)})}}postMessage(t,r){return new Promise(n=>{this.worker.pipe(m(1)).subscribe(i=>{i.postMessage(C({action:t},r)),n()})})}postMessageWithOperation(t,r,n){let i=this.waitForOperationCompleted(n),s=this.postMessage(t,r);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let r;return typeof t=="string"?r=n=>n.type===t:r=n=>t.includes(n.type),this.events.pipe(B(r))}nextEventOfType(t){return this.eventsOfType(t).pipe(m(1))}waitForOperationCompleted(t){return new Promise((r,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(B(i=>i.nonce===t),m(1),f(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:r,error:n})})}get isEnabled(){return!!this.serviceWorker}},Ie=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new k;constructor(r){if(this.sw=r,!r.isEnabled){this.messages=p,this.notificationClicks=p,this.notificationCloses=p,this.pushSubscriptionChanges=p,this.subscription=p;return}this.messages=this.sw.eventsOfType("PUSH").pipe(f(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(f(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(f(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(f(i=>i.data)),this.pushManager=this.sw.registration.pipe(f(i=>i.pushManager));let n=this.pushManager.pipe(M(i=>i.getSubscription()));this.subscription=new O(i=>{let s=n.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error($));let n={userVisibleOnly:!0},i=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return n.applicationServerKey=s,new Promise((o,u)=>{this.pushManager.pipe(M(E=>E.subscribe(n)),m(1)).subscribe({next:E=>{this.subscriptionChanges.next(E),o(E)},error:u})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error($));let r=n=>{if(n===null)throw new g(5602,!1);return n.unsubscribe().then(i=>{if(!i)throw new g(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,i)=>{this.subscription.pipe(m(1),M(r)).subscribe({next:n,error:i})})}decodeBase64(r){return atob(r)}static \u0275fac=function(n){return new(n||e)(d(y))};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),Ce=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=p,this.unrecoverable=p;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error($));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let r=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new g(5601,!1));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}static \u0275fac=function(n){return new(n||e)(d(y))};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})();var Oe=new _("");function xe(){let e=a(P);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=a(Oe),r=a(te),n=a(W);r.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),n.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),r.runOutsideAngular(()=>{let i,{registrationStrategy:s}=e;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...u]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=Pe(+u[0]||0);break;case"registerWhenStable":i=Promise.race([n.whenStable(),Pe(+u[0])]);break;default:throw new g(5600,!1)}}i.then(()=>{n.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(o=>console.error(K(5604,!1)))})})}function Pe(e){return new Promise(t=>setTimeout(t,e))}function Ne(e,t){return new y(e.enabled!==!1?navigator.serviceWorker:void 0,t)}var P=class{enabled;updateViaCache;type;scope;registrationStrategy};function je(e,t={}){return Z([Ie,Ce,{provide:Oe,useValue:e},{provide:P,useValue:t},{provide:y,useFactory:Ne,deps:[P,q]},re(xe)])}var ke=(()=>{class e{static register(r,n={}){return{ngModule:e,providers:[je(r,n)]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=b({type:e});static \u0275inj=h({providers:[Ie,Ce]})}return e})();var G=new _("TRANSLATE_HTTP_LOADER_CONFIG"),Fe=(()=>{class e{http;config;constructor(){this.config=C({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},a(G)),this.http=this.config.useHttpBackend?new x(a(V)):a(x)}getTranslation(r){let n=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${r}${this.config.suffix}${n}`)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})();function _e(e={}){let t=e.useHttpBackend??!1;return[{provide:G,useValue:e},{provide:ye,useClass:Fe,deps:[t?V:x,G]}]}var U=class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=b({type:e,bootstrap:[L]});static \u0275inj=h({providers:[J(),le(),be(he()),ge(me([])),Se({loader:_e({prefix:"../assets/i18n/",suffix:".json"})})],imports:[fe,N,Te,ke.register("ngsw-worker.js",{enabled:!pe(),registrationStrategy:"registerWhenStable:30000"})]})};ue().bootstrapModule(U,{}).catch(e=>console.error(e));
