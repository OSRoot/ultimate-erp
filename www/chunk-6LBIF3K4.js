import{a as S}from"./chunk-GCICTNPJ.js";import{b as F,c as C,e as M}from"./chunk-WGR5CK4R.js";import{$ as m,Aa as o,Ba as c,Ca as V,D as v,Fa as p,G as f,Ga as d,M as h,Q as j,Sa as B,Ta as z,U as s,Y as x,aa as y,cb as _,db as R,ma as a,na as r,oa as D,pa as w,qa as L,sa as u,ya as N}from"./chunk-4MTHTT5R.js";var T=class i{constructor(e){this.platformId=e}isVisible=h(!1);router=f(_);hoverSound;entranceSound;leaveClickSound;acceptSound;soundsReady=!1;showHeaderSerivce=f(S);closing=h(!1);ngAfterViewInit(){this.showHeaderSerivce.setHeader(!0)}ngOnInit(){if(!z(this.platformId))return;document.body.offsetHeight;let e=()=>{this.hoverSound=new Audio("/assets/sounds/tone-01.wav"),this.entranceSound=new Audio("/assets/sounds/entrance.wav"),this.leaveClickSound=new Audio("/assets/sounds/leave-click.wav"),this.acceptSound=new Audio("/assets/sounds/accept.wav"),this.hoverSound.volume=.3,this.entranceSound.volume=.7,this.soundsReady=!0,this.isVisible.set(!0),this.entranceSound.play().catch(t=>console.warn("Entrance sound blocked",t)),document.removeEventListener("click",e),document.removeEventListener("keydown",e)};document.addEventListener("click",e),document.addEventListener("keydown",e)}playHoverSound(){this.soundsReady&&this.hoverSound&&(this.hoverSound.currentTime=0,this.hoverSound.play().catch(()=>{}))}playLeaveClickSound(){this.soundsReady&&this.leaveClickSound&&(this.leaveClickSound.currentTime=.2,this.leaveClickSound.play().catch(()=>{}))}decline(){}onAccept(){this.soundsReady&&this.acceptSound&&(this.acceptSound.currentTime=0,this.acceptSound.play().catch(()=>{})),setTimeout(()=>{this.closing.set(!0)},300),setTimeout(()=>{this.router.navigate(["/intro/splash"])},600),this.showHeaderSerivce.setHeader(!1)}static \u0275fac=function(t){return new(t||i)(x(j))};static \u0275cmp=m({type:i,selectors:[["app-stage-01"]],standalone:!1,decls:32,vars:22,consts:[[1,"stage-01-wrapper"],[1,"stage-01-titlebar"],[1,"title"],[1,"window-controls"],[3,"mouseenter"],[1,"stage-01-header"],[1,"head"],[1,"tail"],[1,"stage-01-container"],[1,"stage-01-buttons"],["mat-flat-button","","color","primary",3,"mouseleave","mouseenter","click"],["mat-flat-button","","color","warn",3,"mouseleave","mouseenter"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),o(3),p(4,"translate"),r(),a(5,"div",3)(6,"button",4),u("mouseenter",function(){return n.playHoverSound()}),o(7,"\u2013"),r(),a(8,"button",4),u("mouseenter",function(){return n.playHoverSound()}),o(9,"\u25A2"),r(),a(10,"button",4),u("mouseenter",function(){return n.playHoverSound()}),o(11,"\u2715"),r()()(),a(12,"div",5),D(13,"div",6),a(14,"h1"),o(15),p(16,"translate"),r(),D(17,"div",7),r(),a(18,"div",8)(19,"p"),o(20),p(21,"translate"),r(),a(22,"p"),o(23),p(24,"translate"),r(),a(25,"div",9)(26,"button",10),u("mouseleave",function(){return n.playLeaveClickSound()})("mouseenter",function(){return n.playHoverSound()})("click",function(){return n.onAccept()}),o(27),p(28,"translate"),r(),a(29,"button",11),u("mouseleave",function(){return n.playLeaveClickSound()})("mouseenter",function(){return n.playHoverSound()}),o(30),p(31,"translate"),r()()()()),t&2&&(N("enter-active",n.isVisible())("closing",n.closing()),s(3),c(d(4,10,"system.modules.intro.stage-01.title")),s(12),c(d(16,12,"system.modules.intro.stage-01.header")),s(5),c(d(21,14,"system.modules.intro.stage-01.firstHint")),s(3),c(d(24,16,"system.modules.intro.stage-01.firstChanceQuestion")),s(4),c(d(28,18,"system.modules.intro.stage-01.accept")),s(3),c(d(31,20,"system.modules.intro.stage-01.decline")))},dependencies:[C],styles:[".stage-01-wrapper[_ngcontent-%COMP%]{opacity:0;transform:translate(-50%,-50%) scale(.9);transition:opacity .8s ease,transform .8s ease;position:relative;top:40%;left:50%;width:800px;min-height:400px;display:flex;flex-direction:column;background:#08141ea6;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);--border-color: rgba(0, 255, 255, .6);--box-shadow-color1: rgba(0, 255, 255, .3);--box-shadow-color2: rgba(0, 255, 255, .25);--box-shadow-color3: rgba(0, 255, 255, .25);border:2px solid var(--border-color);box-shadow:0 0 14px var(--box-shadow-color1),0 0 30px var(--box-shadow-color2),inset 0 0 10px var(--box-shadow-color3);border-radius:12px;color:#e0ffff;overflow:hidden}.stage-01-titlebar[_ngcontent-%COMP%]{-webkit-app-region:drag;display:flex;justify-content:space-between;align-items:center;height:38px;padding:0 12px;background:#001e2899;border-bottom:1px solid rgba(0,255,255,.3);font-size:.9rem;font-family:medium-latin;font-weight:600;color:#aefcff;letter-spacing:1px;text-shadow:0 0 6px cyan}.stage-01-titlebar[_ngcontent-%COMP%]   .window-controls[_ngcontent-%COMP%]{display:flex;gap:8px;-webkit-app-region:no-drag}.stage-01-titlebar[_ngcontent-%COMP%]   .window-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(0,255,255,.3);color:#aefcff;border-radius:4px;width:28px;height:22px;cursor:pointer;transition:all .2s ease;font-weight:700;text-shadow:0 0 6px cyan}.stage-01-titlebar[_ngcontent-%COMP%]   .window-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#00ffff1a;box-shadow:0 0 8px #0ff}.stage-01-header[_ngcontent-%COMP%]{margin:auto;width:500px;padding:16px;text-align:center;letter-spacing:2px}.stage-01-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:bold-latin;font-size:2rem;font-weight:700;text-shadow:0 0 8px cyan,0 0 16px rgba(0,255,255,.8),0 0 28px rgba(0,255,255,.6);animation:_ngcontent-%COMP%_textPulse 3s infinite alternate}.stage-01-header[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .stage-01-header[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{width:70%;height:3px;margin:12px auto;background:linear-gradient(90deg,transparent,cyan,transparent);border-radius:2px;animation:_ngcontent-%COMP%_glowLine 2s infinite alternate}.stage-01-header[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{animation-direction:alternate-reverse}.stage-01-container[_ngcontent-%COMP%]{flex:1;text-align:center;padding:16px 24px}.stage-01-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:2;font-size:1.4rem;color:#dff;font-family:medium-latin}.stage-01-buttons[_ngcontent-%COMP%]{margin-top:20px}.stage-01-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:16px;padding:10px 24px;min-width:150px;min-height:45px;border-radius:8px;border:1px solid rgba(0,255,255,.4);background:#00283266;color:#e0ffff;text-shadow:0 0 8px cyan;transition:all .3s ease}.stage-01-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 0 10px #0ff9,0 0 10px #0ff6;transform:scale(1.01)}@keyframes _ngcontent-%COMP%_glowLine{0%{box-shadow:0 0 6px #0ff;opacity:.6}to{box-shadow:0 0 18px #0ff;opacity:1}}@keyframes _ngcontent-%COMP%_textPulse{0%{text-shadow:0 0 6px cyan,0 0 14px rgba(0,255,255,.7)}to{text-shadow:0 0 12px cyan,0 0 28px rgb(0,255,255)}}.stage-01-wrapper.enter-active[_ngcontent-%COMP%]{opacity:1;transform:translate(-50%,-50%) scaleX(1);transform-origin:center;transition:transform .5s ease,opacity .6s ease}.stage-01-wrapper.closing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_foldClose .6s ease forwards;transform-origin:center}@keyframes _ngcontent-%COMP%_foldClose{0%{opacity:1;transform:translate(-50%,-50%) scaleX(1);--border-color: rgba(0, 255, 255, .6);--box-shadow-color1: rgba(0, 255, 255, .3);--box-shadow-color2: rgba(0, 255, 255, .25);--box-shadow-color3: rgba(0, 255, 255, .25)}to{opacity:0;transform:translate(-50%,-50%) scaleX(0);--border-color: rgba(0, 255, 255, 0);--box-shadow-color1: rgba(0, 255, 255, 0);--box-shadow-color2: rgba(0, 255, 255, 0);--box-shadow-color3: rgba(0, 255, 255, 0)}}"]})};var O=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=m({type:i,selectors:[["app-stage-02"]],standalone:!1,decls:2,vars:0,template:function(t,n){t&1&&(a(0,"p"),o(1,"stage-02 works!"),r())},encapsulation:2})};var k=class i{constructor(e,t){this.translate=e;this.showHeader=t}timeouts=[];typingSpeed=100;pauseTime=3e3;messageIndex=0;currentText=h(null);messages=["system.modules.intro.splash.loading","system.modules.intro.splash.starting","system.modules.intro.splash.shadows"];router=f(_);ngOnInit(){this.startTypingLoop(),setTimeout(()=>{this.router.navigate(["/home"]),this.showHeader.setHeader(!0)},5e3)}ngOnDestroy(){this.clearAllTimeouts()}async startTypingLoop(){for(;;){let e=this.messages[this.messageIndex],t=this.translate.instant(e)||e;await this.typeText(t),await this.wait(this.pauseTime),await this.deleteText(),this.messageIndex=(this.messageIndex+1)%this.messages.length}}async typeText(e){for(let t=0;t<=e.length;t++)this.currentText.set(e.substring(0,t)),t>0&&this.playSnareTypingKey(),await this.wait(this.typingSpeed)}async deleteText(){for(;this.currentText().length>0;)this.currentText.set(this.currentText().substring(0,this.currentText().length-1)),await this.wait(this.typingSpeed/1.5)}wait(e){return new Promise(t=>{let n=setTimeout(t,e);this.timeouts.push(n)})}clearAllTimeouts(){this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts=[]}playSnareTypingKey(){let e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate*.04,n=e.createBuffer(1,t,e.sampleRate),l=n.getChannelData(0);for(let H=0;H<t;H++)l[H]=Math.random()*3-1;let b=e.createBufferSource();b.buffer=n;let E=e.createGain();E.gain.setValueAtTime(.08,e.currentTime),E.gain.exponentialRampToValueAtTime(.005,e.currentTime+.004),b.connect(E).connect(e.destination);let g=e.createOscillator();g.type="triangle",g.frequency.setValueAtTime(1200+Math.random()*100,e.currentTime);let A=e.createGain();A.gain.setValueAtTime(9e-4,e.currentTime),A.gain.exponentialRampToValueAtTime(.002,e.currentTime+.005),g.connect(A).connect(e.destination),b.start(),g.start(),b.stop(e.currentTime+.008),g.stop(e.currentTime+.05)}static \u0275fac=function(t){return new(t||i)(x(F),x(S))};static \u0275cmp=m({type:i,selectors:[["app-splash"]],decls:8,vars:4,consts:[[1,"splash-wrapper"],[1,"logo"],[1,"loading"],[1,"cursor"]],template:function(t,n){t&1&&(w(0,"div",0)(1,"div",1),o(2),p(3,"translate"),L(),w(4,"div",2),o(5),w(6,"span",3),o(7,"|"),L()()()),t&2&&(s(2),c(d(3,2,"system.TITLE")),s(3),V("",n.currentText()," "))},dependencies:[M,C],styles:[".splash-wrapper[_ngcontent-%COMP%]{height:100vh!important;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(circle at center,#001020,#000);color:#0ff;font-family:bold-latin;text-shadow:0 0 12px cyan;animation:fadeIn 2s ease forwards;transition:all .3s ease}.cursor[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;color:#0ff;font-weight:700;text-shadow:0 0 8px cyan,0 0 16px cyan;animation:_ngcontent-%COMP%_blink .5s step-end infinite}.logo[_ngcontent-%COMP%]{z-index:1;font-size:2.5rem;margin-bottom:20px}.loading[_ngcontent-%COMP%]{font-size:1.2rem;animation:_ngcontent-%COMP%_smoothPulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_smoothPulse{0%{opacity:.6;text-shadow:0 0 6px cyan,0 0 12px rgba(0,255,255,.4)}50%{opacity:1;text-shadow:0 0 12px cyan,0 0 24px rgba(0,255,255,.8)}to{opacity:.6;text-shadow:0 0 6px cyan,0 0 12px rgba(0,255,255,.4)}}@keyframes _ngcontent-%COMP%_blink{50%{opacity:0;text-shadow:none}}"]})};var X=[{path:"",redirectTo:"stage-01",pathMatch:"full"},{path:"stage-01",component:T},{path:"stage-02",component:O},{path:"splash",component:k}],I=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=y({type:i});static \u0275inj=v({imports:[R.forChild(X),R]})};var U=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=y({type:i});static \u0275inj=v({imports:[B,I,M]})};export{U as IntroModule};
