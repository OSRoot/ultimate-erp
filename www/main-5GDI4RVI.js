import{a as ve}from"./chunk-PIOY7UXO.js";import{a as Te}from"./chunk-2JOGHCU5.js";import{Aa as B,B as K,Ba as R,C as Z,Ca as fe,Da as ge,E as q,Fa as he,Ga as me,H as F,Ha as be,I as J,J as Y,Ja as H,K as Q,Ka as we,L as b,La as ye,Ma as Ee,Na as Me,O as X,Oa as Se,P as ee,Q as U,V as te,W as M,X as v,Y as re,a as k,ba as D,c as _,d as P,e as d,h as p,ha as S,i as L,ia as ne,k as g,la as ie,ma as oe,n as E,na as se,oa as ae,p as u,q as $,r as f,s as h,t as I,ta as ce,u as m,ua as pe,v as a,w as z,xa as le,ya as de,z as G,za as ue}from"./chunk-I3GED7ZE.js";var De=[{path:"",pathMatch:"full",redirectTo:"intro"},{path:"intro",loadChildren:()=>import("./chunk-KS73ODL6.js").then(e=>e.IntroModule)},{path:"home",loadChildren:()=>import("./chunk-WB6D6VR7.js").then(e=>e.HomeModule)}],x=class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=b({type:e});static \u0275inj=h({imports:[H.forRoot(De),H]})};var N=class e{constructor(t,r){this.translate=t;this.rendererFactory=r;this.renderer=this.rendererFactory.createRenderer(null,null)}renderer;initTranslate(){let t=localStorage.getItem("lang")||"ja";console.log("Saved language:",t),this.translate.setDefaultLang(t),this.changeLang(t)}changeLang(t){["en","ar","ja"].includes(t)||(console.warn(`Unsupported language: ${t}, defaulting to English`),t="en"),this.translate.use(t).subscribe({next:()=>console.log(`Language changed to ${t}`),error:i=>console.error(`Error changing language to ${t}`,i)}),localStorage.setItem("lang",t);let r=t==="ar"?"rtl":"ltr";document.querySelector("ion-content")?.classList.add("hidden"),document.documentElement.setAttribute("dir",r),document.querySelector("html")?.setAttribute("dir",r);let n=document.documentElement;t==="ar"?(n.style.setProperty("--ion-font-family","var(--ion-font-family-arabic)"),n.style.setProperty("--ion-font-family-bold","var(--ion-font-family-bold-arabic)")):t==="ja"?(n.style.setProperty("--ion-font-family",'"Noto Sans JP", sans-serif'),n.style.setProperty("--ion-font-family-bold",'"Noto Sans JP Bold", sans-serif')):(n.style.setProperty("--ion-font-family",'"regular", sans-serif'),n.style.setProperty("--ion-font-family-bold",'"bold", sans-serif'))}getLang(){return localStorage.getItem("lang")||"en"}translateByKey(t){return t?this.translate.instant(t):""}static \u0275fac=function(r){return new(r||e)(m(ye),m(J))};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};var xe=e=>({hide:e}),A=class e{constructor(t){this.platformId=t;le(t)&&this.locale.initTranslate()}title=Z("ultimate-erp");electronService=a(Te);showHeader=a(ve).showHeader;locale=a(N);clickTest(){console.log("Angular button click fired"),this.electronService.minimize()}static \u0275fac=function(r){return new(r||e)(Y(q))};static \u0275cmp=Q({type:e,selectors:[["app-root"]],standalone:!1,decls:13,vars:6,consts:[[1,"main-app-window"],[1,"titlebar",3,"ngClass"],[1,"app-title"],[1,"window-controls"],["id","min-btn",3,"click"],["id","max-btn",3,"click"],["id","close-btn",3,"click"]],template:function(r,n){r&1&&(M(0,"div",0)(1,"header",1)(2,"div",2),S(3),oe(4,"translate"),v(),M(5,"div",3)(6,"button",4),D("click",function(){return n.clickTest()}),S(7,"\u2013"),v(),M(8,"button",5),D("click",function(){return n.electronService.toggleMaximize()}),S(9,"\u{1F533}"),v(),M(10,"button",6),D("click",function(){return n.electronService.close()}),S(11,"\u2715"),v()()(),re(12,"router-outlet"),v()),r&2&&(F(),te("ngClass",ie(4,xe,!n.showHeader())),F(2),ne(se(4,2,"system.TITLE")))},dependencies:[pe,be,Ee],styles:['@charset "UTF-8";.main-app-window[_ngcontent-%COMP%]{position:relative;height:100%}.titlebar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:36px;padding:4px 12px;display:flex;justify-content:space-between;align-items:center;-webkit-app-region:drag!important;background:radial-gradient(circle at center,#001020,#000);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border-bottom:1px solid rgba(0,255,255,.4);color:#e0ffff;letter-spacing:1px;transition:opacity .3s ease,transform .3s ease;z-index:10}.titlebar.hide[_ngcontent-%COMP%]{opacity:0;transform:translateY(-100%);pointer-events:none}.window-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-app-region:no-drag!important;background:transparent;border:none;color:#e0ffff;cursor:pointer;padding:0 8px;font-size:14px;transition:all .2s ease}.window-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#0ff;text-shadow:0 0 2px rgba(0,255,255,.286),0 0 4px rgba(0,255,255,.2)}.main-app-window.has-header[_ngcontent-%COMP%]   router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:36px}.app-title[_ngcontent-%COMP%]{font-weight:600;text-shadow:0 0 4px rgba(0,255,255,.435),0 0 2px rgba(0,255,255,.2);animation:_ngcontent-%COMP%_titlePulse 3s infinite alternate}@keyframes _ngcontent-%COMP%_titlePulse{0%{text-shadow:0 0 4px cyan,0 0 8px rgba(0,255,255,.6)}to{text-shadow:0 0 8px cyan,0 0 16px rgb(0,255,255)}}.titlebar[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:linear-gradient(90deg,transparent,rgba(0,255,255,.455),transparent)}']})};var W="Service workers are disabled or not supported by this browser",w=class{serviceWorker;worker;registration;events;constructor(t,r){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new _(n=>n.error(new u(5601,!1)));else{let n=null,i=new P;this.worker=new _(c=>(n!==null&&c.next(n),i.subscribe(O=>c.next(O))));let s=()=>{let{controller:c}=t;c!==null&&(n=c,i.next(n))};t.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(E(()=>t.getRegistration().then(c=>{if(!c)throw new u(5601,!1);return c})));let o=new P;this.events=o.asObservable();let l=c=>{let{data:O}=c;O?.type&&o.next(O)};t.addEventListener("message",l),r?.get(U,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",s),t.removeEventListener("message",l)})}}postMessage(t,r){return new Promise(n=>{this.worker.pipe(g(1)).subscribe(i=>{i.postMessage(k({action:t},r)),n()})})}postMessageWithOperation(t,r,n){let i=this.waitForOperationCompleted(n),s=this.postMessage(t,r);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let r;return typeof t=="string"?r=n=>n.type===t:r=n=>t.includes(n.type),this.events.pipe(L(r))}nextEventOfType(t){return this.eventsOfType(t).pipe(g(1))}waitForOperationCompleted(t){return new Promise((r,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(L(i=>i.nonce===t),g(1),d(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:r,error:n})})}get isEnabled(){return!!this.serviceWorker}},Oe=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new P;constructor(r){if(this.sw=r,!r.isEnabled){this.messages=p,this.notificationClicks=p,this.notificationCloses=p,this.pushSubscriptionChanges=p,this.subscription=p;return}this.messages=this.sw.eventsOfType("PUSH").pipe(d(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(d(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(d(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(d(i=>i.data)),this.pushManager=this.sw.registration.pipe(d(i=>i.pushManager));let n=this.pushManager.pipe(E(i=>i.getSubscription()));this.subscription=new _(i=>{let s=n.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(W));let n={userVisibleOnly:!0},i=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return n.applicationServerKey=s,new Promise((o,l)=>{this.pushManager.pipe(E(y=>y.subscribe(n)),g(1)).subscribe({next:y=>{this.subscriptionChanges.next(y),o(y)},error:l})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(W));let r=n=>{if(n===null)throw new u(5602,!1);return n.unsubscribe().then(i=>{if(!i)throw new u(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,i)=>{this.subscription.pipe(g(1),E(r)).subscribe({next:n,error:i})})}decodeBase64(r){return atob(r)}static \u0275fac=function(n){return new(n||e)(m(w))};static \u0275prov=f({token:e,factory:e.\u0275fac})}return e})(),ke=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=p,this.unrecoverable=p;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(W));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let r=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new u(5601,!1));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}static \u0275fac=function(n){return new(n||e)(m(w))};static \u0275prov=f({token:e,factory:e.\u0275fac})}return e})();var _e=new I("");function Ne(){let e=a(C);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=a(_e),r=a(X),n=a(U);r.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),n.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),r.runOutsideAngular(()=>{let i,{registrationStrategy:s}=e;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...l]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=Ce(+l[0]||0);break;case"registerWhenStable":i=Promise.race([n.whenStable(),Ce(+l[0])]);break;default:throw new u(5600,!1)}}i.then(()=>{n.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(o=>console.error($(5604,!1)))})})}function Ce(e){return new Promise(t=>setTimeout(t,e))}function Ae(e,t){return new w(e.enabled!==!1?navigator.serviceWorker:void 0,t)}var C=class{enabled;updateViaCache;type;scope;registrationStrategy};function je(e,t={}){return z([Oe,ke,{provide:_e,useValue:e},{provide:C,useValue:t},{provide:w,useFactory:Ae,deps:[C,G]},ee(Ne)])}var Pe=(()=>{class e{static register(r,n={}){return{ngModule:e,providers:[je(r,n)]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=b({type:e});static \u0275inj=h({providers:[Oe,ke]})}return e})();var V=new I("TRANSLATE_HTTP_LOADER_CONFIG"),Le=(()=>{class e{http;config;constructor(){this.config=k({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},a(V)),this.http=this.config.useHttpBackend?new R(a(B)):a(R)}getTranslation(r){let n=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${r}${this.config.suffix}${n}`)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=f({token:e,factory:e.\u0275fac})}return e})();function Ie(e={}){let t=e.useHttpBackend??!1;return[{provide:V,useValue:e},{provide:we,useClass:Le,deps:[t?B:R,V]}]}var j=class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=b({type:e,bootstrap:[A]});static \u0275inj=h({providers:[K(),ae(),me(he()),fe(ge([])),Me({loader:Ie({prefix:"../assets/i18n/",suffix:".json"})})],imports:[ue,x,Se,Pe.register("ngsw-worker.js",{enabled:!ce(),registrationStrategy:"registerWhenStable:30000"})]})};de().bootstrapModule(j,{}).catch(e=>console.error(e));
